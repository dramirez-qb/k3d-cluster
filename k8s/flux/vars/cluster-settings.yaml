---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-settings
  namespace: flux-system
data:
  TIMEZONE: "Europe/Sofia"
  CURRENT_EXTERNAL_IP: "${CURRENT_EXTERNAL_IP}"
  CLUSTER_NAME: "${CLUSTER_NAME}"
  CURRENT_IP: "${CURRENT_IP}"
  CIDR_RANGE: "${CIDR_RANGE}"
  START_RANGE: "${START_RANGE}"
  END_RANGE: "${END_RANGE}"
---
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: first-pool
  namespace: metallb-system
spec:
  addresses:
  - ${START_RANGE}-${END_RANGE}
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: local-cluster
  namespace: metallb-system
spec:
  ipAddressPools:
  - first-pool
